<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="format-detection" content="telephone=no">
  
  <title>NEON FIT // OPÉRATIONS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700;800;900&family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script src="program-data-v2.js?v=1764354000"></script>
  <script src="app-v2.js?v=1764354000"></script>
  
  <style>
    :root { 
      --void: #020408;
      --cyan: #22d3ee;
      --cyan-dim: #06b6d4;
      --purple: #c084fc;
      --magenta: #ff2d95;
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
      -webkit-tap-highlight-color: transparent;
    }
    
    body { 
      background-color: var(--void);
      font-family: 'Inter', sans-serif;
      color: #f8fafc;
      overflow-x: hidden;
      min-height: 100vh;
      min-height: 100dvh;
      touch-action: manipulation;
      padding-bottom: calc(20px + env(safe-area-inset-bottom));
    }
    
    .font-hud { font-family: 'Chakra Petch', sans-serif; }
    
    .grain-overlay {
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
      opacity: 0.03;
      pointer-events: none;
      z-index: 999;
      mix-blend-mode: screen;
    }
    
    /* ========== HEADER ========== */
    .header-bar {
      padding: max(12px, env(safe-area-inset-top)) 20px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    /* ========== TIMELINE PREMIUM ========== */
    .timeline-scroll {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 0 20px 16px;
      gap: 8px;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    
    .timeline-scroll::-webkit-scrollbar { display: none; }
    
    .week-chip {
      scroll-snap-align: center;
      flex: 0 0 auto;
      width: 52px;
      height: 52px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
    }
    
    .week-chip:active { transform: scale(0.92); }
    
    .week-chip.active {
      background: rgba(34, 211, 238, 0.15);
      border-color: var(--cyan);
      box-shadow: 0 0 20px rgba(34, 211, 238, 0.3);
    }
    
    .week-chip.active .week-num {
      color: var(--cyan);
      text-shadow: 0 0 10px var(--cyan);
    }
    
    .week-chip.deload {
      border-color: rgba(34, 197, 94, 0.4);
    }
    .week-chip.deload.active {
      background: rgba(34, 197, 94, 0.15);
      border-color: #22c55e;
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
    }
    .week-chip.deload .week-label,
    .week-chip.deload .week-num { color: #22c55e; }
    
    .week-chip.peak {
      border-color: rgba(168, 85, 247, 0.4);
    }
    .week-chip.peak.active {
      background: rgba(168, 85, 247, 0.15);
      border-color: #a855f7;
      box-shadow: 0 0 20px rgba(168, 85, 247, 0.3);
    }
    .week-chip.peak .week-label,
    .week-chip.peak .week-num { color: #a855f7; }
    
    .week-chip.completed::after {
      content: '';
      position: absolute;
      bottom: 6px;
      width: 6px;
      height: 6px;
      background: var(--cyan);
      border-radius: 50%;
      box-shadow: 0 0 6px var(--cyan);
    }
    
    .week-label {
      font-size: 8px;
      font-weight: 700;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .week-num {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 18px;
      font-weight: 800;
      color: #e2e8f0;
      line-height: 1;
    }
    
    /* ========== BLOCK TITLE ========== */
    .block-title-section {
      padding: 0 20px 20px;
    }
    
    .block-main-title {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 28px;
      font-weight: 900;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .block-subtitle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }
    
    .block-subtitle::before {
      content: '//';
      color: var(--cyan);
      font-weight: 700;
    }
    
    .block-subtitle-text {
      font-size: 11px;
      font-weight: 600;
      color: var(--cyan);
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }
    
    /* ========== HERO MISSION CARD ========== */
    .hero-mission {
      margin: 0 16px 20px;
      border-radius: 24px;
      overflow: hidden;
      position: relative;
      min-height: 280px;
      background: linear-gradient(135deg, rgba(15,23,42,0.9) 0%, rgba(15,23,42,0.7) 100%);
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .hero-mission-bg {
      position: absolute;
      inset: 0;
      background: url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800&q=80') center/cover;
      opacity: 0.3;
      filter: grayscale(30%);
    }
    
    .hero-mission-content {
      position: relative;
      z-index: 2;
      padding: 20px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .priority-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(0,0,0,0.5);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 20px;
      width: fit-content;
      margin-bottom: 16px;
    }
    
    .priority-dot {
      width: 6px;
      height: 6px;
      background: #22c55e;
      border-radius: 50%;
      box-shadow: 0 0 8px #22c55e;
      animation: blink 2s infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .priority-text {
      font-size: 10px;
      font-weight: 700;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .hero-day-title {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 42px;
      font-weight: 900;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 0 4px 20px rgba(0,0,0,0.5);
      line-height: 1;
    }
    
    .hero-workout-name {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }
    
    .hero-workout-name::before {
      content: '';
      width: 3px;
      height: 20px;
      background: var(--cyan);
      border-radius: 2px;
      box-shadow: 0 0 10px var(--cyan);
    }
    
    .hero-workout-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--cyan);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .hero-nav-btn {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .hero-nav-btn:active {
      background: rgba(34, 211, 238, 0.2);
      border-color: var(--cyan);
    }
    
    .hero-metrics {
      margin-top: auto;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
    }
    
    .hero-metric {
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 16px 12px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .hero-metric:active {
      transform: scale(0.95);
    }
    
    .hero-metric.start-btn {
      background: linear-gradient(135deg, rgba(34,211,238,0.2) 0%, rgba(34,211,238,0.1) 100%);
      border-color: rgba(34, 211, 238, 0.3);
      cursor: pointer;
    }
    
    .hero-metric.start-btn:active {
      background: linear-gradient(135deg, rgba(34,211,238,0.3) 0%, rgba(34,211,238,0.2) 100%);
    }
    
    .metric-icon {
      color: var(--cyan);
      margin-bottom: 6px;
    }
    
    .metric-value {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 20px;
      font-weight: 800;
      color: #fff;
    }
    
    .metric-label {
      font-size: 9px;
      font-weight: 600;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-top: 2px;
    }
    
    /* ========== ANALYTIQUE SECTION ========== */
    .section-title {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 20px;
      margin-bottom: 12px;
    }
    
    .section-title-bar {
      width: 3px;
      height: 14px;
      background: var(--cyan);
      border-radius: 2px;
    }
    
    .section-title-text {
      font-size: 11px;
      font-weight: 700;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }
    
    .analytics-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 0 16px 20px;
    }
    
    .analytics-card {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 20px;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .analytics-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(34,211,238,0.2), transparent);
    }
    
    .analytics-label {
      font-size: 10px;
      font-weight: 700;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 8px;
    }
    
    .analytics-value {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 32px;
      font-weight: 900;
      color: #fff;
      line-height: 1;
    }
    
    .analytics-unit {
      font-size: 14px;
      font-weight: 600;
      color: #64748b;
      margin-left: 2px;
    }
    
    .analytics-change {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 8px;
      font-size: 11px;
      font-weight: 600;
      color: #22c55e;
    }
    
    .analytics-icon {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #475569;
    }
    
    .analytics-bar {
      margin-top: 12px;
      height: 4px;
      background: rgba(255,255,255,0.05);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .analytics-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--cyan), #22c55e);
      border-radius: 2px;
      transition: width 1s ease;
    }
    
    /* ========== OTHER MISSIONS ========== */
    .other-missions {
      padding: 0 16px 100px;
    }
    
    .mission-row {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 16px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .mission-row:active {
      transform: scale(0.98);
      background: rgba(255,255,255,0.04);
    }
    
    .mission-day-badge {
      width: 44px;
      height: 44px;
      background: rgba(34,211,238,0.1);
      border: 1px solid rgba(34,211,238,0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Chakra Petch', sans-serif;
      font-size: 11px;
      font-weight: 800;
      color: var(--cyan);
      text-transform: uppercase;
    }
    
    .mission-day-badge.pink {
      background: rgba(236,72,153,0.1);
      border-color: rgba(236,72,153,0.2);
      color: #ec4899;
    }
    
    .mission-day-badge.purple {
      background: rgba(168,85,247,0.1);
      border-color: rgba(168,85,247,0.2);
      color: #a855f7;
    }
    
    .mission-day-badge.amber {
      background: rgba(245,158,11,0.1);
      border-color: rgba(245,158,11,0.2);
      color: #f59e0b;
    }
    
    .mission-info {
      flex: 1;
    }
    
    .mission-name {
      font-family: 'Chakra Petch', sans-serif;
      font-size: 14px;
      font-weight: 700;
      color: #fff;
      text-transform: uppercase;
    }
    
    .mission-meta {
      font-size: 11px;
      color: #64748b;
      margin-top: 2px;
    }
    
    .mission-arrow {
      color: #475569;
    }
  </style>
</head>

<body class="antialiased">
  <div class="grain-overlay"></div>
  
  <!-- HEADER -->
  <div class="header-bar">
    <div>
      <h1 class="font-hud text-xl font-black text-white tracking-wider">OPÉRATIONS</h1>
      <div class="flex items-center gap-2 mt-1">
        <div class="w-2 h-2 rounded-full bg-green-500" style="box-shadow: 0 0 8px #22c55e;"></div>
        <span class="text-[10px] font-bold text-green-400 uppercase tracking-wider">Online</span>
      </div>
    </div>
    <button onclick="window.location.href='index.html'" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center">
      <i data-lucide="trophy" class="w-5 h-5 text-amber-400"></i>
    </button>
  </div>
  
  <!-- TIMELINE -->
  <div class="timeline-scroll" id="timeline">
    <div class="week-chip active"><span class="week-label">SEM</span><span class="week-num">1</span></div>
    <div class="week-chip"><span class="week-label">SEM</span><span class="week-num">2</span></div>
    <div class="week-chip"><span class="week-label">SEM</span><span class="week-num">3</span></div>
    <div class="week-chip"><span class="week-label">SEM</span><span class="week-num">4</span></div>
    <div class="week-chip"><span class="week-label">SEM</span><span class="week-num">5</span></div>
    <div class="week-chip deload"><span class="week-label">DELOAD</span><span class="week-num">6</span></div>
    <div class="week-chip"><span class="week-label">SEM</span><span class="week-num">7</span></div>
  </div>
  
  <!-- BLOCK TITLE -->
  <div class="block-title-section">
    <h2 class="block-main-title" id="block-name">FONDATIONS</h2>
    <div class="block-subtitle">
      <span class="block-subtitle-text" id="block-info">BLOC 1 • VOLUME & TECHNIQUE</span>
    </div>
  </div>
  
  <!-- HERO MISSION CARD -->
  <div class="hero-mission" id="hero-mission">
    <div class="hero-mission-bg"></div>
    <div class="hero-mission-content">
      <div class="priority-badge">
        <div class="priority-dot"></div>
        <span class="priority-text">Priorité Alpha</span>
      </div>
      
      <h3 class="hero-day-title" id="hero-day">DIMANCHE</h3>
      <div class="hero-workout-name">
        <span class="hero-workout-text" id="hero-workout">DOS + JAMBES</span>
      </div>
      
      <button class="hero-nav-btn" id="hero-next-btn">
        <i data-lucide="chevron-right" class="w-5 h-5 text-white"></i>
      </button>
      
      <div class="hero-metrics">
        <div class="hero-metric">
          <i data-lucide="clock" class="w-5 h-5 metric-icon"></i>
          <div class="metric-value" id="hero-duration">68m</div>
          <div class="metric-label">Durée</div>
        </div>
        <div class="hero-metric">
          <i data-lucide="zap" class="w-5 h-5 metric-icon"></i>
          <div class="metric-value" id="hero-density">89%</div>
          <div class="metric-label">Densité</div>
        </div>
        <div class="hero-metric start-btn" id="hero-start-btn">
          <i data-lucide="play" class="w-5 h-5 metric-icon"></i>
          <div class="metric-value">START</div>
          <div class="metric-label">Lancer</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ANALYTIQUE -->
  <div class="section-title">
    <div class="section-title-bar"></div>
    <span class="section-title-text">Analytique</span>
  </div>
  
  <div class="analytics-grid">
    <div class="analytics-card">
      <div class="analytics-label">Meilleur Perf</div>
      <div>
        <span class="analytics-value" id="best-perf">140</span>
        <span class="analytics-unit">KG</span>
      </div>
      <div class="analytics-change">
        <i data-lucide="trending-up" class="w-3 h-3"></i>
        <span id="perf-change">+2.5% vs Sem 3</span>
      </div>
      <div class="analytics-icon">
        <i data-lucide="trophy" class="w-5 h-5"></i>
      </div>
    </div>
    
    <div class="analytics-card">
      <div class="analytics-label">Volume Hebdo</div>
      <div>
        <span class="analytics-value" id="weekly-volume">42</span>
        <span class="analytics-unit">T</span>
      </div>
      <div class="analytics-bar">
        <div class="analytics-bar-fill" id="volume-bar" style="width: 75%;"></div>
      </div>
      <div class="analytics-icon">
        <span class="text-2xl font-hud font-black text-slate-600">#</span>
      </div>
    </div>
  </div>
  
  <!-- OTHER MISSIONS -->
  <div class="section-title">
    <div class="section-title-bar"></div>
    <span class="section-title-text">Autres Missions</span>
  </div>
  
  <div class="other-missions" id="other-missions"></div>

  <script>
    let currentWeek = 1;
    let currentDayIndex = 0;
    const days = ['dimanche', 'mardi', 'vendredi', 'maison'];
    const dayLabels = { 'dimanche': 'DIM', 'mardi': 'MAR', 'vendredi': 'VEN', 'maison': 'MAI' };
    const dayColors = { 'dimanche': '', 'mardi': 'pink', 'vendredi': 'purple', 'maison': 'amber' };
    
    function initIcons() {
      if (typeof lucide !== 'undefined') lucide.createIcons();
    }
    
    function init() {
      currentWeek = parseInt(localStorage.getItem('hybrid_current_week') || '1');
      initIcons();
      renderTimeline();
      renderContent(currentWeek);
      
      document.getElementById('hero-start-btn').onclick = () => {
        const day = days[currentDayIndex];
        window.location.href = `briefing.html?week=${currentWeek}&day=${day}`;
      };
      
      document.getElementById('hero-next-btn').onclick = () => {
        currentDayIndex = (currentDayIndex + 1) % days.length;
        updateHeroCard(currentWeek);
      };
      
      document.getElementById('hero-mission').onclick = (e) => {
        if (e.target.closest('.hero-metric') || e.target.closest('.hero-nav-btn')) return;
        const day = days[currentDayIndex];
        window.location.href = `briefing.html?week=${currentWeek}&day=${day}`;
      };
    }
    
    function renderTimeline() {
      const container = document.getElementById('timeline');
      container.innerHTML = '';
      
      for (let i = 1; i <= 26; i++) {
        const weekData = programData.getWeek(i);
        const isDeload = weekData.isDeload;
        const isPeak = i === 25;
        
        let extraClass = '';
        if (isDeload) extraClass = 'deload';
        if (isPeak) extraClass = 'peak';
        
        const chip = document.createElement('div');
        chip.className = `week-chip ${i === currentWeek ? 'active' : ''} ${extraClass}`;
        
        chip.onclick = () => {
          document.querySelectorAll('.week-chip').forEach(c => c.classList.remove('active'));
          chip.classList.add('active');
          currentWeek = i;
          localStorage.setItem('hybrid_current_week', i);
          currentDayIndex = 0;
          renderContent(i);
        };
        
        const label = isDeload ? 'DELOAD' : (isPeak ? 'PEAK' : 'SEM');
        chip.innerHTML = `
          <span class="week-label">${label}</span>
          <span class="week-num">${i}</span>
        `;
        
        container.appendChild(chip);
      }
      
      setTimeout(() => {
        const active = container.querySelector('.active');
        if (active) active.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      }, 300);
    }
    
    function renderContent(week) {
      const weekData = programData.getWeek(week);
      
      const blockName = programData.info.blockTechniques[`block${weekData.block}`]?.name || "FONDATIONS";
      document.getElementById('block-name').textContent = blockName.toUpperCase();
      document.getElementById('block-info').textContent = `BLOC ${weekData.block} • ${weekData.technique}`;
      
      updateHeroCard(week);
      renderOtherMissions(week);
      updateAnalytics(week);
      initIcons();
    }
    
    function updateHeroCard(week) {
      const weekData = programData.getWeek(week);
      const day = days[currentDayIndex];
      const workout = weekData[day];
      
      if (!workout) {
        currentDayIndex = 0;
        updateHeroCard(week);
        return;
      }
      
      const dayName = day.charAt(0).toUpperCase() + day.slice(1);
      document.getElementById('hero-day').textContent = dayName.toUpperCase();
      document.getElementById('hero-workout').textContent = workout.name;
      document.getElementById('hero-duration').textContent = workout.duration + 'm';
      
      const density = Math.min(100, Math.round((workout.totalSets / workout.duration) * 100 / 1.2));
      document.getElementById('hero-density').textContent = density + '%';
      
      initIcons();
    }
    
    function renderOtherMissions(week) {
      const container = document.getElementById('other-missions');
      container.innerHTML = '';
      const weekData = programData.getWeek(week);
      
      days.forEach((day, index) => {
        if (index === currentDayIndex) return;
        
        const workout = weekData[day];
        if (!workout) return;
        
        const row = document.createElement('div');
        row.className = 'mission-row';
        row.onclick = () => window.location.href = `briefing.html?week=${week}&day=${day}`;
        
        row.innerHTML = `
          <div class="mission-day-badge ${dayColors[day]}">${dayLabels[day]}</div>
          <div class="mission-info">
            <div class="mission-name">${workout.name}</div>
            <div class="mission-meta">${workout.duration}m • ${workout.totalSets} séries</div>
          </div>
          <i data-lucide="chevron-right" class="w-5 h-5 mission-arrow"></i>
        `;
        
        container.appendChild(row);
      });
      
      initIcons();
    }
    
    function updateAnalytics(week) {
      try {
        const history = JSON.parse(localStorage.getItem('neon_fit_workout_history') || '[]');
        const weekHistory = history.filter(h => h.week === week);
        
        let maxWeight = 0;
        let totalVolume = 0;
        
        history.forEach(session => {
          if (session.exercises) {
            session.exercises.forEach(ex => {
              if (ex.sets) {
                ex.sets.forEach(set => {
                  if (set.weight > maxWeight) maxWeight = set.weight;
                  totalVolume += (set.weight || 0) * (set.reps || 0);
                });
              }
            });
          }
        });
        
        if (maxWeight > 0) {
          document.getElementById('best-perf').textContent = maxWeight;
        }
        
        const volumeT = (totalVolume / 1000).toFixed(0);
        if (totalVolume > 0) {
          document.getElementById('weekly-volume').textContent = volumeT;
        }
      } catch(e) {}
    }
    
    function waitForData() {
      if (typeof programData !== 'undefined' && programData.getWeek) {
        init();
      } else {
        setTimeout(waitForData, 50);
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', waitForData);
    } else {
      waitForData();
    }
  </script>
</body>
</html>
